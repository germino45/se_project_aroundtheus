!function(){"use strict";var e="",t=e+"b94d2730df2c7df3da07.jpg",s=e+"4e8e0a1d604782a0dff8.svg";class r{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_toggleInputState(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_checkValidity(e){return!e.validity.valid}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}toggleButtonState(){if(this._hasInvalidInput())return this._buttonEl.classList.add(this._inactiveButtonClass),void(this._buttonEl.disabled=!0);this._buttonEl.classList.remove(this._inactiveButtonClass),this._buttonEl.disabled=!1}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonEl=this._form.querySelector(this._submitButtonSelector),this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._toggleInputState(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}function i(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class n{constructor(e){i(this,"handleButtonclose",(()=>{this.close()})),i(this,"_handleEscapeClose",(e=>{"Escape"===e.key&&this.close()})),i(this,"_handleOverlayClick",(e=>{e.target.classList.contains("modal")&&this.close()})),this._popupElement=document.querySelector(e),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscapeClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscapeClose)}setEventListeners(){this._closeButton.addEventListener("click",this.handleButtonclose),this._popupElement.addEventListener("mousedown",this._handleOverlayClick)}}var o=class extends n{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".form"),this._inputs=this._popupForm.querySelectorAll(".form__input"),this._handleFormSubmit=t}_getInputValues(){const e={};return this._inputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),this.close()}))}close(){this._popupForm.reset(),super.close()}};function a(e,t,s){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class l{constructor(e,t,s){a(this,"_handleLikeIcon",(()=>{this._likeButton.classList.toggle("card__like-button_activated")})),a(this,"_handleDeleteCard",(()=>{this._element.remove(),this._element=null})),this._name=e.name,this._link=e.link,this._handleImageClick=s,this._cardSelector=t}_setEventListeners(){this._likeButton.addEventListener("click",this._handleLikeIcon),this._deleteButton.addEventListener("click",this._handleDeleteCard),this._cardImageEl.addEventListener("click",(()=>this._handlePreviewPicture(this._name,this._link)))}_handlePreviewPicture(){this._handleImageClick(this._name,this._link)}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._element=this._getTemplate(),this._cardImageEl=this._element.querySelector(".card__image"),this._likeButton=this._element.querySelector(".card__like-button"),this._deleteButton=this._element.querySelector("#card-delete-button"),this._cardImage=this._element.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardText=this._element.querySelector(".card__text"),this._cardText.textContent=this._name,this._setEventListeners(),this._element}}const c={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__save-button_disabled",inputErrorClass:"form__input_type_error",errorClass:"form__input-error"},u=document.getElementById("header-logo"),d=document.getElementById("profile-image"),h=document.querySelector("#profile-edit-button"),_=document.querySelector("#profile-title-input"),p=document.querySelector("#profile-description-input"),m=document.querySelector("#profile-form"),v=(document.querySelector("#profile-close-button"),document.querySelector(".profile__title")),f=document.querySelector(".profile__description"),g=document.querySelector("#card-add-button"),b=document.querySelector("#add-form"),y={cardSection:".cards__list",cardTemplate:"#card-template",cardPreviewPopup:"#image-modal",profilePopup:"#profile-modal",addCardPopup:"#add-modal"};u.src=s,d.src=t,new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getInitialCards(){fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getApiInfo(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"524dc900-b8ae-4b17-aa07-465dc385d766","Content-type":"application/json"}});const E=new class{constructor(e,t){this._userName=e,this._userJob=t}getUserInfo(){return{name:this._userName.textContent,job:this._userJob.textContent}}setUserInfo(e,t){this._userName.textContent=e,this._userJob.textContent=t}}(v,f),S=new o(y.profilePopup,(function(e){E.setUserInfo(e.title,e.description),S.close()})),k=new o(y.addCardPopup,(function(e){C({name:e.title,link:e.link})})),L=new class extends n{constructor(e){super(e),this._image=this._popupElement.querySelector(".modal__image-picture"),this._caption=this._popupElement.querySelector(".modal__image-caption")}open(e,t){this._image.src=t,this._image.alt=e,this._caption.textContent=e,super.open()}}(y.cardPreviewPopup,I),w=new class{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://live.staticflickr.com/65535/50970386722_550d19f11b_b.jpg"},{name:"Lake Louise",link:"https://www.worldatlas.com/r/w1200-q80/upload/b4/2c/95/shutterstock-569741011.jpg"},{name:"Bald Mountains",link:"https://www.roadtripryan.com/go/resources/content/utah/northern-utah/bald-moutain-uintas/user-submitted/ryancornia-1631641778217.jpg"},{name:"Latemar",link:"https://media.istockphoto.com/id/155359110/photo/milky-way-in-the-alps.jpg?s=612x612&w=0&k=20&c=q9pv4VxHGZlm0AJRoQMIUjtnPh2RLXmm_MWxya1nq4Q="},{name:"Vanoise National Park",link:"https://photos.thetrek.co/wp-content/uploads/2022/07/28030930/dsc09105-013725388244148498558.jpeg"},{name:"Lago di Braies",link:"https://expertvagabond.com/wp-content/uploads/lago-di-braies-italy-guide.jpg"}],renderer:C},y.cardSection);function C(e){const t=new l(e,y.cardTemplate,I).getView();w.addItem(t)}function I(e,t){L.open(e,t)}S.setEventListeners(),k.setEventListeners(),L.setEventListeners(),w.renderItems(),h.addEventListener("click",(()=>{!function(){const e=E.getUserInfo();_.value=e.name,p.value=e.job,q.toggleButtonState(),S.open()}()})),g.addEventListener("click",(()=>{k.open(),B.toggleButtonState()}));const q=new r(c,m),B=new r(c,b);q.enableValidation(),B.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU0sVUFDTmEsS0FBTSxnSkFFUixDQUNFYixLQUFNLHdCQUNOYSxLQUFNLHFHQUVSLENBQ0ViLEtBQU0saUJBQ05hLEtBQU0saUZDbURlMkUsU0FBVU4sR0FDakN4QyxFQUFtQkMsYUErQ3JCLFNBQVN1QyxFQUFXN0UsR0FDbEIsTUFBTTRGLEVBS2MsSUFBSTdGLEVBTEFDLEVBT3RCcUMsRUFBbUJFLGFBQ25CckMsR0FDQWlCLFVBUkZtQixFQUFZbUQsUUFBUUcsRUFDdEIsQ0FXQSxTQUFTMUYsRUFBaUJQLEVBQU1hLEdBQzlCc0UsRUFBV2pHLEtBQUtjLEVBQU1hLEVBQ3hCLENBeERBaUUsRUFBY3pGLG9CQUNkNEYsRUFBYTVGLG9CQUNiOEYsRUFBVzlGLG9CQUVYc0QsRUFBWWlELGNBRVoxRCxFQUFrQjlELGlCQUFpQixTQUFTLE1BWTVDLFdBQ0UsTUFBTThILEVBQWM1QixFQUFTUixjQUM3QjNCLEVBQVdsQyxNQUFRaUcsRUFBWWxHLEtBQy9Cb0MsRUFBaUJuQyxNQUFRaUcsRUFBWXZCLElBQ3JDd0IsRUFBa0J2SSxvQkFDbEJrSCxFQUFjNUYsTUFDaEIsQ0FqQkVrSCxFQUFjLElBR2hCNUQsRUFBY3BFLGlCQUFpQixTQUFTLEtBc0J0QzZHLEVBQWEvRixPQUNibUgsRUFBaUJ6SSxtQkF0QkosSUFrRGYsTUFBTXVJLEVBQW9CLElBQUl6SyxFQUFjbUcsRUFBb0JRLEdBQzFEZ0UsRUFBbUIsSUFBSTNLLEVBQWNtRyxFQUFvQlksR0FFL0QwRCxFQUFrQjlILG1CQUNsQmdJLEVBQWlCaEksa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9Db21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9Db21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvQ29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL0NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL0NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvQ29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9Db21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvQ29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsKSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsO1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICBfdG9nZ2xlSW5wdXRTdGF0ZShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICB9XG5cbiAgX2NoZWNrVmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIHJldHVybiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZDtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsKSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWwudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2J1dHRvbkVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fYnV0dG9uRWwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9idXR0b25FbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl90b2dnbGVJbnB1dFN0YXRlKGlucHV0RWwpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCJcbiAgICApO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NhcGVDbG9zZSk7XG4gIH1cblxuICBoYW5kbGVCdXR0b25jbG9zZSA9ICgpID0+IHtcbiAgICB0aGlzLmNsb3NlKCk7XG4gIH07XG5cbiAgX2hhbmRsZUVzY2FwZUNsb3NlID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgX2hhbmRsZU92ZXJsYXlDbGljayA9IChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsXCIpKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZUJ1dHRvbmNsb3NlKTtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2spO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcblxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXBpY3R1cmVcIik7XG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1jYXB0aW9uXCIpO1xuICB9XG4gIG9wZW4obmFtZSwgbGluaykge1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICBjb25zdCBpbnB1dE9iaiA9IHt9O1xuXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICBpbnB1dE9ialtpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dE9iajtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlSW1hZ2VDbGljaykge1xuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcblxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlSWNvbik7XG5cbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQpO1xuXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVQcmV2aWV3UGljdHVyZSh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxuICAgICk7XG4gIH1cblxuICBfaGFuZGxlTGlrZUljb24gPSAoKSA9PiB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZhdGVkXCIpO1xuICB9O1xuXG4gIF9oYW5kbGVEZWxldGVDYXJkID0gKCkgPT4ge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG5cbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfTtcblxuICBfaGFuZGxlUHJldmlld1BpY3R1cmUoKSB7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgfVxuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZEltYWdlRWwgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ1dHRvblwiKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1kZWxldGUtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcblxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xuXG4gICAgdGhpcy5fY2FyZFRleHQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGV4dFwiKTtcbiAgICB0aGlzLl9jYXJkVGV4dC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn1cbiIsImNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgbGluazogXCJodHRwczovL2xpdmUuc3RhdGljZmxpY2tyLmNvbS82NTUzNS81MDk3MDM4NjcyMl81NTBkMTlmMTFiX2IuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgbGluazogXCJodHRwczovL3d3dy53b3JsZGF0bGFzLmNvbS9yL3cxMjAwLXE4MC91cGxvYWQvYjQvMmMvOTUvc2h1dHRlcnN0b2NrLTU2OTc0MTAxMS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vd3d3LnJvYWR0cmlwcnlhbi5jb20vZ28vcmVzb3VyY2VzL2NvbnRlbnQvdXRhaC9ub3J0aGVybi11dGFoL2JhbGQtbW91dGFpbi11aW50YXMvdXNlci1zdWJtaXR0ZWQvcnlhbmNvcm5pYS0xNjMxNjQxNzc4MjE3LmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL21lZGlhLmlzdG9ja3Bob3RvLmNvbS9pZC8xNTUzNTkxMTAvcGhvdG8vbWlsa3ktd2F5LWluLXRoZS1hbHBzLmpwZz9zPTYxMng2MTImdz0wJms9MjAmYz1xOXB2NFZ4SEdabG0wQUpSb1FNSVVqdG5QaDJSTFhtbV9NV3h5YTFucTRRPVwiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcGhvdG9zLnRoZXRyZWsuY28vd3AtY29udGVudC91cGxvYWRzLzIwMjIvMDcvMjgwMzA5MzAvZHNjMDkxMDUtMDEzNzI1Mzg4MjQ0MTQ4NDk4NTU4LmpwZWdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vZXhwZXJ0dmFnYWJvbmQuY29tL3dwLWNvbnRlbnQvdXBsb2Fkcy9sYWdvLWRpLWJyYWllcy1pdGFseS1ndWlkZS5qcGdcIixcbiAgfSxcbl07XG5cbmNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zYXZlLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcImZvcm1fX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwiZm9ybV9faW5wdXQtZXJyb3JcIixcbn07XG5cbmNvbnN0IGhlYWRlckltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXItbG9nb1wiKTtcblxuY29uc3QgcHJvZmlsZUltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9maWxlLWltYWdlXCIpO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gcHJvZmlsZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcblxuY29uc3QgdGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcblxuY29uc3QgZGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKTtcblxuY29uc3QgcHJvZmlsZUZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZm9ybVwiKTtcblxuY29uc3QgcHJvZmlsZUNsb3NlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWNsb3NlLWJ1dHRvblwiKTtcblxuY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcblxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gQWRkIENhcmQgTW9kYWwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuY29uc3QgY2FyZEFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1hZGQtYnV0dG9uXCIpO1xuXG5jb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWZvcm1cIik7XG5cbmNvbnN0IGNvbnRhaW5lclNlbGVjdG9ycyA9IHtcbiAgY2FyZFNlY3Rpb246IFwiLmNhcmRzX19saXN0XCIsXG4gIGNhcmRUZW1wbGF0ZTogXCIjY2FyZC10ZW1wbGF0ZVwiLFxuICBjYXJkUHJldmlld1BvcHVwOiBcIiNpbWFnZS1tb2RhbFwiLFxuICBwcm9maWxlUG9wdXA6IFwiI3Byb2ZpbGUtbW9kYWxcIixcbiAgYWRkQ2FyZFBvcHVwOiBcIiNhZGQtbW9kYWxcIixcbn07XG5cbmV4cG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBjb250YWluZXJTZWxlY3RvcnMsXG4gIGhlYWRlckltYWdlLFxuICBwcm9maWxlSW1hZ2UsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICB0aXRsZUlucHV0LFxuICBkZXNjcmlwdGlvbklucHV0LFxuICBwcm9maWxlRm9ybSxcbiAgcHJvZmlsZUNsb3NlQnV0dG9uLFxuICBwcm9maWxlVGl0bGUsXG4gIHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgY2FyZEFkZEJ1dHRvbixcbiAgYWRkQ2FyZEZvcm0sXG59O1xuIiwiLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbXBvcnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQgcHJvZmlsZUltYWdlU3JjIGZyb20gXCIuLi9pbWFnZXMvamFjcXVlcy1jb3VzdGVhdS5qcGdcIjtcblxuaW1wb3J0IGhlYWRlckltYWdlU3JjIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcblxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL0NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vQ29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5cbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vQ29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vQ29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5cbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vQ29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vQ29tcG9uZW50cy9DYXJkLmpzXCI7XG5cbmltcG9ydCB7XG4gIGluaXRpYWxDYXJkcyxcbiAgdmFsaWRhdGlvblNldHRpbmdzLFxuICBjb250YWluZXJTZWxlY3RvcnMsXG4gIGhlYWRlckltYWdlLFxuICBwcm9maWxlSW1hZ2UsXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICB0aXRsZUlucHV0LFxuICBkZXNjcmlwdGlvbklucHV0LFxuICBwcm9maWxlRm9ybSxcbiAgcHJvZmlsZVRpdGxlLFxuICBwcm9maWxlRGVzY3JpcHRpb24sXG4gIGNhcmRBZGRCdXR0b24sXG4gIGFkZENhcmRGb3JtLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmltcG9ydCBBcGkgZnJvbSBcIi4uL0NvbXBvbmVudHMvQXBpLmpzXCI7XG5cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuaGVhZGVySW1hZ2Uuc3JjID0gaGVhZGVySW1hZ2VTcmM7XG5cbnByb2ZpbGVJbWFnZS5zcmMgPSBwcm9maWxlSW1hZ2VTcmM7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiNTI0ZGM5MDAtYjhhZS00YjE3LWFhMDctNDY1ZGMzODVkNzY2XCIsXG4gICAgXCJDb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8ocHJvZmlsZVRpdGxlLCBwcm9maWxlRGVzY3JpcHRpb24pO1xuXG5jb25zdCBlZGl0Rm9ybVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIGNvbnRhaW5lclNlbGVjdG9ycy5wcm9maWxlUG9wdXAsXG4gIHN1Ym1pdEVkaXRQcm9maWxlXG4pO1xuXG5jb25zdCBhZGRGb3JtUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgY29udGFpbmVyU2VsZWN0b3JzLmFkZENhcmRQb3B1cCxcbiAgc3VibWl0QWRkQ2FyZFxuKTtcblxuY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcbiAgY29udGFpbmVyU2VsZWN0b3JzLmNhcmRQcmV2aWV3UG9wdXAsXG4gIGhhbmRsZUltYWdlQ2xpY2tcbik7XG5cbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gIHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IHJlbmRlckNhcmQgfSxcbiAgY29udGFpbmVyU2VsZWN0b3JzLmNhcmRTZWN0aW9uXG4pO1xuXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRXZlbnQgTGlzdGVuZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmFkZEZvcm1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuaW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuRWRpdEZvcm0oKTtcbn0pO1xuXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5BZGRGb3JtKCk7XG59KTtcblxuLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbi8qICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5mdW5jdGlvbiBvcGVuRWRpdEZvcm0oKSB7XG4gIGNvbnN0IHByb2ZpbGVJbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgdGl0bGVJbnB1dC52YWx1ZSA9IHByb2ZpbGVJbmZvLm5hbWU7XG4gIGRlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlSW5mby5qb2I7XG4gIGVkaXRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIGVkaXRGb3JtUG9wdXAub3BlbigpO1xufVxuXG5mdW5jdGlvbiBzdWJtaXRFZGl0UHJvZmlsZShpbnB1dFZhbHVlcykge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcy50aXRsZSwgaW5wdXRWYWx1ZXMuZGVzY3JpcHRpb24pO1xuICBlZGl0Rm9ybVBvcHVwLmNsb3NlKCk7XG59XG5cbmZ1bmN0aW9uIG9wZW5BZGRGb3JtKCkge1xuICBhZGRGb3JtUG9wdXAub3BlbigpO1xuICBhZGRGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG59XG5cbmZ1bmN0aW9uIHN1Ym1pdEFkZENhcmQoZGF0YSkge1xuICByZW5kZXJDYXJkKHsgbmFtZTogZGF0YS50aXRsZSwgbGluazogZGF0YS5saW5rIH0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoaXRlbSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKFxuICAgIGl0ZW0sXG4gICAgY29udGFpbmVyU2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSxcbiAgICBoYW5kbGVJbWFnZUNsaWNrXG4gICkuZ2V0VmlldygpO1xuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2sobmFtZSwgbGluaykge1xuICBpbWFnZVBvcHVwLm9wZW4obmFtZSwgbGluayk7XG59XG4vKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRm9ybSBWYWxpZGF0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBwcm9maWxlRm9ybSk7XG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBhZGRDYXJkRm9ybSk7XG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzIC0gaGVhZGVycztcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGdldEFwaUluZm8oKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZSwgdXNlckpvYikge1xuICAgIHRoaXMuX3VzZXJOYW1lID0gdXNlck5hbWU7XG4gICAgdGhpcy5fdXNlckpvYiA9IHVzZXJKb2I7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4geyBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCwgam9iOiB0aGlzLl91c2VySm9iLnRleHRDb250ZW50IH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBkZXNjcmlwdGlvbikge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl91c2VySm9iLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XG4gIH1cbn1cbiIsImNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiRm9ybVZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtRWwiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwicmVtb3ZlIiwiX3RvZ2dsZUlucHV0U3RhdGUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2NoZWNrVmFsaWRpdHkiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0TGlzdCIsInNvbWUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9idXR0b25FbCIsImRpc2FibGVkIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9kZWZpbmVQcm9wZXJ0eSIsImNsb3NlIiwia2V5IiwidGFyZ2V0IiwiY29udGFpbnMiLCJfcG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJfY2xvc2VCdXR0b24iLCJvcGVuIiwiX2hhbmRsZUVzY2FwZUNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEV2ZW50TGlzdGVuZXJzIiwiaGFuZGxlQnV0dG9uY2xvc2UiLCJfaGFuZGxlT3ZlcmxheUNsaWNrIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9pbnB1dHMiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0T2JqIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJpbnB1dFZhbHVlcyIsInJlc2V0IiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiX2xpa2VCdXR0b24iLCJ0b2dnbGUiLCJfZWxlbWVudCIsIl9uYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUxpa2VJY29uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZUVsIiwiX2hhbmRsZVByZXZpZXdQaWN0dXJlIiwiX2dldFRlbXBsYXRlIiwiY29udGVudCIsImNsb25lTm9kZSIsImdldFZpZXciLCJfY2FyZEltYWdlIiwic3JjIiwiYWx0IiwiX2NhcmRUZXh0IiwidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaGVhZGVySW1hZ2UiLCJnZXRFbGVtZW50QnlJZCIsInByb2ZpbGVJbWFnZSIsInByb2ZpbGVFZGl0QnV0dG9uIiwidGl0bGVJbnB1dCIsImRlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlRm9ybSIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsImNhcmRBZGRCdXR0b24iLCJhZGRDYXJkRm9ybSIsImNvbnRhaW5lclNlbGVjdG9ycyIsImNhcmRTZWN0aW9uIiwiY2FyZFRlbXBsYXRlIiwiY2FyZFByZXZpZXdQb3B1cCIsInByb2ZpbGVQb3B1cCIsImFkZENhcmRQb3B1cCIsImhlYWRlckltYWdlU3JjIiwicHJvZmlsZUltYWdlU3JjIiwiX3JlZiIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwiZ2V0SW5pdGlhbENhcmRzIiwiZ2V0QXBpSW5mbyIsImFsbCIsImF1dGhvcml6YXRpb24iLCJ1c2VySW5mbyIsInVzZXJOYW1lIiwidXNlckpvYiIsIl91c2VyTmFtZSIsIl91c2VySm9iIiwiam9iIiwic2V0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsImVkaXRGb3JtUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwidGl0bGUiLCJhZGRGb3JtUG9wdXAiLCJyZW5kZXJDYXJkIiwiaW1hZ2VQb3B1cCIsIl9pbWFnZSIsIl9jYXB0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNhcmQiLCJwcm9maWxlSW5mbyIsImVkaXRGb3JtVmFsaWRhdG9yIiwib3BlbkVkaXRGb3JtIiwiYWRkRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=